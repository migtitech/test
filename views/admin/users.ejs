<%- include('../partials/header') %>

<h1>User Management</h1>

<div class="card">
  <h2>Create New User</h2>
  <% if (error) { %>
    <div class="alert alert-error"><%= error %></div>
  <% } %>
  <form method="POST" action="/admin/users/create" class="form-inline">
    <input type="text" name="name" placeholder="Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="password" name="password" placeholder="Password" required>
    <button type="submit" class="btn btn-primary">Create User</button>
  </form>
</div>

<div class="card">
  <h2>All Users</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Wallet</th>
        <th>Joined</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(u => { %>
      <tr>
        <td><%= u.name %></td>
        <td><%= u.email %></td>
        <td><%= u.wallet %> pts</td>
        <td><%= u.createdAt.toLocaleDateString() %></td>
        <td>
          <form method="POST" action="/admin/users/delete/<%= u._id %>" style="display:inline" onsubmit="return confirm('Delete this user?')">
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<%- include('../partials/footer') %>
